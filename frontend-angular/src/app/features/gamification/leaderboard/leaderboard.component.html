<div class="space-y-6">
    <div class="text-center py-8 animate-in fade-in slide-in-from-top-4 duration-700">
        <h1
            class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-500 to-orange-600 dark:from-yellow-400 dark:to-orange-500 mb-2 flex items-center justify-center gap-3">
            <ng-icon name="lucideTrophy" size="40" class="text-yellow-500"></ng-icon>
            Global Leaderboard
        </h1>
        <p class="text-gray-500 dark:text-gray-400">The top elite hackers in the community</p>
    </div>

    @if (loading) {
    <div class="text-center py-12">Loading leaderboard...</div>
    } @else {
    <div
        class="bg-white dark:bg-gray-800 rounded-xl shadow-xl overflow-hidden border border-gray-200 dark:border-gray-700">
        <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr class="bg-gray-50 dark:bg-gray-700/50">
                        <th
                            class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Rank</th>
                        <th
                            class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            User</th>
                        <th
                            class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Rooms</th>
                        <th
                            class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Streak</th>
                        <th
                            class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                            Points</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100 dark:divide-gray-700">
                    @for (user of leaderboard; track user.userId; let index = $index) {
                    <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"
                        [ngClass]="{'bg-yellow-50/30 dark:bg-yellow-900/10': index < 3}">
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                @if (index === 0) { <ng-icon name="lucideTrophy" size="20"
                                    class="text-yellow-500 mr-2"></ng-icon> }
                                @if (index === 1) { <ng-icon name="lucideTrophy" size="20"
                                    class="text-gray-400 mr-2"></ng-icon> }
                                @if (index === 2) { <ng-icon name="lucideTrophy" size="20"
                                    class="text-amber-600 mr-2"></ng-icon> }
                                <span class="font-bold"
                                    [ngClass]="index < 3 ? 'text-lg text-gray-900 dark:text-white' : 'text-gray-500'">
                                    #{{ index + 1 }}
                                </span>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 h-10 w-10">
                                    @if (user.profilePhoto) {
                                    <img class="h-10 w-10 rounded-full object-cover border-2 border-white dark:border-gray-700 shadow-sm"
                                        [src]="user.profilePhoto" alt="" />
                                    } @else {
                                    <div
                                        class="h-10 w-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center">
                                        <ng-icon name="lucideUser" size="20"
                                            class="text-blue-600 dark:text-blue-400"></ng-icon>
                                    </div>
                                    }
                                </div>
                                <div class="ml-4">
                                    <div class="text-sm font-bold text-gray-900 dark:text-white">{{ user.name }}</div>
                                    <div class="flex gap-1 mt-1">
                                        @for (badge of user.badges.slice(0, 3); track badge.badgeId) {
                                        <span [title]="badge.name" class="text-xs">
                                            <ng-icon name="lucideAward" size="14" class="text-purple-500"></ng-icon>
                                        </span>
                                        }
                                        @if (user.badges.length > 3) {
                                        <span class="text-[10px] text-gray-400">+{{ user.badges.length - 3 }}</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center text-sm text-gray-600 dark:text-gray-300">
                                <ng-icon name="lucideTarget" size="14" class="mr-2 text-blue-500"></ng-icon>
                                {{ user.completedRooms }}
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <div class="flex items-center text-sm text-gray-600 dark:text-gray-300">
                                <ng-icon name="lucideFlame" size="14" class="mr-2 text-orange-500"></ng-icon>
                                {{ user.streak }}
                            </div>
                        </td>
                        <td class="px-6 py-4 whitespace-nowrap">
                            <span
                                class="px-3 py-1 text-sm font-bold text-sky-700 dark:text-sky-300 bg-sky-100 dark:bg-sky-900/30 rounded-full">
                                {{ user.points | number }} XP
                            </span>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
    }
</div>